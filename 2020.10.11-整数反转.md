# 题目描述

**给出一个 32 位的有符号整数,你需要将这个整数中每位上的数字进行反转,注意:假设我们的环境只能存储得下 32 位的有符号整数,则其数值范围为[ −2^31,2^31−1 ]请根据这个假设,如果反转后整数溢出那么就返回 0**

# 题目分析

- 有符号整数
- 每位反转
- 溢出

# 参数说明

```js
/*
 * @param {number} x
 * @return {number}
 */
```

# 题解及实现

1. 转换成字符串再反转
   **先忽略正负,将整数绝对值转换成字符串进而转换成数组,利用数组进行反转拼接,最后将得到得反转后字符串转换为整数并判断溢出**

```js
var reverse = function (x) {
  let Max32 = 2 ** 31 - 1;
  let Min32 = -(2 ** 31);
  //1.获得绝对值转化成数组,并反转拼接,利用parseInt转换为number类型,并消除前导零
  let result = Number.parseInt(
    Array.from(Math.abs(x).toString()).reverse().join("")
  );
  //2.判断结果是否越界
  if (result > Max32 || result < Min32) return 0;
  //3.判断正负
  return x < 0 ? -result : result;
};
```

**时间复杂度和内部算法实现有关**

- 资源使用情况
  - 执行用时：92 ms, 在所有 JavaScript 提交中击败了 90.18%的用户
  - 内存消耗：39.3 MB, 在所有 JavaScript 提交中击败了 7.55%的用户
    **问题:多处出现临时空间,空间消耗大**

---

2. 数学方法
   **用数学方法一步步将源整数每一位添加到另一个新整数的末尾,过程中源整数一次次变小,新整数慢慢变大,直到源整数全部位反转**

_说明_

- 对任意整数取末尾: result = int % 10
- 对任意整数去除末位:result = int - int/10 **此处应为整除**

```js
var reverse = function (x) {
  let MAX = Number.parseInt((2 ** 31 - 1)/10);
  let MIN = Number.parseInt(-(2 ** 31)/10);
  let rev = 0; // 接收整数
  let pop = 0; // 每个位
  while (x !== 0) {
    //当x为0时,源整数取完最后一位,因为个位数整除10为0
    pop = x % 10; //取得个位数字
    //先判断溢出再继续
    if (rev > MAX || (rev == MAX && pop > 7)) return 0;
    if (rev < MIN || (rev == MIN && pop < -8)) return 0;
    rev = rev * 10 + pop;
    x = Number.parseInt(x / 10);
    //js没有整除,得到的都是浮点数
  }
  return rev;
};
```
_补充_
+ 因为js没有整除,代码中所有Number.parseInt都是用于实现整除
+ 解释大于7和小于-8以及MAX,MIN都是TRUE_MAX/10
  + 32位最大整数是2147483647,最小值是-2147483648,在一位一位反转拼接的过程中,只有在最后一位拼接过来时才会出现溢出,因为之前位数少一位,不可能超出范围,但在拼接到倒数第二位时,如果此时rev最后一位已经大于5,那无论后面接什么都会溢出,因为最大值在这位上是4,但如果rev最后一位是4,那仍然需要判断即将添加的pop是否大于7或者小于-8,例如,在即将拼接最后一位时,rev = 214748364,
  此时的pop = 8,那拼接后rev = 2147483648 就会出现溢出,故在拼接之前就要判断

**时间复杂度:O(log(x)),整数位数**

- 资源使用情况
  + 执行用时：112 ms, 在所有 JavaScript 提交中击败了34.71%的用户
  + 内存消耗：39.2 MB, 在所有 JavaScript 提交中击败了9.02%的用户
  **问题:js无整除,转换耗时太大**


